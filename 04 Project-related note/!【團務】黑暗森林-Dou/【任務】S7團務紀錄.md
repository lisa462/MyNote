# 行動
- [x] 更新[第2版角卡](https://docs.google.com/spreadsheets/d/1aMLS-Y5H9fncdznmKfqycp3Hukk4mBpes_Jnfmt-Qxo/edit?gid=2009574223#gid=2009574223)資料庫(新增三大擴充的內容，~~要記得跟toki申請是否可以取用的同意~~)

	- [x] 擴充職業列表
	- [x] 擴充職業後文列表
	- [x] 擴充英雄技能列表
	- [x] 擴充特性列表
	- [x] 新增可選規則列表(自然擴充的營地規則未有)
	- [x] 檢查以上列表的風格和內容是否無誤
		- [x] 擴充職業列表
		- [x] 擴充職業後文列表(增加王牌的職業後文列表)
		- [x] 擴充英雄技能列表
		- [x] 擴充特性列表
		- [x] 新增可選規則列表(自然擴充的營地規則未有)
	- [x] 修改角卡
		- [x] 職業、職業技能同行(雙層拉調)
			- [x] 欄位角色等級、職業等級、技能1-5直接顯現出來
		- [x] 職業免費增益的HP、MP刪除，保留職業防具和武器的if判斷式
		- [x] 新增角色特性欄位
		- [x] 新增背包欄位(項目和描述就夠了)
		- [x] 增加英雄技能欄位至5欄
		- [x] 新增可選規則欄位(可以放在整個角卡的最上方，包含正在跑的內容)
		- [x] 在首頁新增創角參考列表(可以參考之前zhizhi給的連接)
		- [x] 擴充類的直接用toki的就好
		- [x] 新增特殊點數欄位(墳墓點、貿易點...)
		- [x] 新增舞者後文列表
		- [x] **檢查所有公式是否可以正常運行**

- [toki來源](https://hackmd.io/@co17Cy04QPGDLGdWY9S1Aw/r1OprQCdJl)
![[image-44.png]]
- [x] 更換跑團平台-CCF
	- https://ccfolia.com/rooms/_qvUlHzGN
	- 建設房間(命刻12)
	- 增加探索場景和衝突場景的音樂BGM
- [x] 敵人可以設定的強一點，指HP要增加
	- [x] 設定勇者的數據(首領+小兵)

# 構思
- 敵人不要設定光弱點，盡量針對玩家的弱點去打。
- 下場戰鬥設定勇者要包含射手座的能力，強力的攻擊、即死的傷害。酒醉的香氣
- 白金王子的數據對照[[團隊表 | 澤菲拉]] 擔任輔助者的位置
- 這次團務只在2回合就被打爆了。太慘了
- 戰鬥的時候可以放一個計算機在旁邊
- 戰鬥規則可以多看一下關於**親合度計算的部分，還有戰鬥優勢的地方**
	- 親合度的計算一律在最後進行。

# 封存
```=IF(B85="","", IFERROR(
  INDEX(
    FILTER('附表.職業'!E:E, '附表.職業'!B:B=A85),
    COUNTIF($A$85:A85,A85)
  ),
  ""
))
```

你觀察得非常精準 👏👏👏 DouDouXD！

是的沒錯：  
`FILTER(...)` 搭配 `INDEX(...)` 的方式，雖然可以一行顯示一筆技能，但 **要靠「COUNTIF 遞增」手動抓出第 N 筆資料**，而不是 `FILTER` 自動「一拖展開多列」。

---

## ✅ 讓我們直接講清楚這個限制：

|類型|是否能一次展開多筆結果|補充|
|---|---|---|
|`FILTER`|✅ 可以（但只能輸出整塊）|無法「一行一行往下填」|
|`INDEX + FILTER`|❌ 每行只能取出一筆|要靠 `COUNTIF` 控制第幾筆|
|`ARRAYFORMULA + INDEX`|⚠️ 有限制|需要複雜技巧才能自動展開|
|`MATCH`|❌ 拿來抓位置用的，不是展開用的|不適合你目前的情境|

---

## 🧠 為什麼你會遇到「只顯示第一個技能」？

因為你的公式是「每一列自己用 `COUNTIF` 判斷是第幾次」，而不是 `FILTER` 自動展開整個陣列。

---

## 💡 那我怎麼做到像你說的「展開多筆技能，自動填滿列」？

你其實就快成功了！這邊有兩種方式給你選：

---

### ✨ 方式 1：每列使用 `INDEX + FILTER` + `COUNTIF`

📌（你已經在做這件事）

```
=IFERROR(
  INDEX(
    FILTER('附表.職業'!E:E, '附表.職業'!B:B=A86),
    COUNTIF($A$85:A86,A86)
  ),
  ""
)
```

這招你只要每列都複製，就會出現「第1筆技能、第2筆、第3筆...」  
缺點是你要手動往下拉，但效果最穩、最自由控制。

---

### 🔁 方式 2：用 `SPLIT + TEXTJOIN` 撈回來再分列（如果資料是文字型技能清單）

如果你願意在資料庫中，讓技能不是一列一筆，而是寫成：

|職業|技能|
|---|---|
|騎士|聖盾衝鋒｜重甲戰意｜反擊姿態|

你就可以這樣用：

```
=SPLIT(
  TEXTJOIN("｜", TRUE, FILTER('附表.職業'!E:E, '附表.職業'!B:B=A86)),
  "｜"
)
```

這樣會直接把所有技能「自動填滿一列或一欄」✨

---

## 🤖 要真正做到「一行職業自動展開技能清單」該怎麼辦？

我們可以：

- 用一個清單列出所有職業（例如：B85 是職業）
    
- 然後從旁邊一行行往下展開對應技能
    

🔧 只要這樣寫（你目前方法其實就行）：

```
=IFERROR(
  INDEX(
    FILTER('附表.職業'!E:E, '附表.職業'!B:B=$B$85),
    ROW(A1)
  ),
  ""
)
```

👉 `ROW(A1)` 會變成 1、2、3、4... 讓你在旁邊一直往下展開技能！

---
